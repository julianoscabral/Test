This is preliminary pseudocode with some equations towards a formal model description
